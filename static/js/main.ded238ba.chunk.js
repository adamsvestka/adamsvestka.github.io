(this.webpackJsonphomepage=this.webpackJsonphomepage||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var a=n(14),c=n(1),r=n(3),i=n.n(r),s=n(16),o=n.n(s),l=n(6),u=n(10),d=n.n(u),b=n(17),j=n(8),h=n(114),f=n(24),O=n(49),m=n.n(O),p=n(50),v=n(22),g=n(12),x=n(13),_=n(5),I=(n(34),n(111),n(66),n(112),n(51)),k=(n(104),Object(r.createContext)({})),y={Loading:function(){return Object(c.jsx)("div",{className:"loading-container",children:Object(c.jsx)("div",{className:"lds-ellipsis",children:Object(a.a)(Array(4)).map((function(e,t){return Object(c.jsx)("div",{},t)}))})})},Switch:function(e){var t=e.on;return Object(c.jsx)("div",{className:"switch "+(t?"on":"off")})}};try{_.a.initializeApp({apiKey:"AIzaSyAzpjpeQgorGwi0JFEwHB4gmnoLCCaLY0k",authDomain:"homepage-407c5.firebaseapp.com",databaseURL:"https://homepage-407c5.firebaseio.com",projectId:"homepage-407c5",storageBucket:"homepage-407c5.appspot.com",messagingSenderId:"837019211462",appId:"1:837019211462:web:cf461d3ab5fa5bec6f69c7",measurementId:"G-2EHD20CHYQ"})}catch(K){console.error(K)}var N=new(function(){function e(){Object(g.a)(this,e),this.default=this.selected="",this.list=[]}return Object(x.a)(e,[{key:"load",value:function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localization){e.next=15;break}return e.next=3,fetch("".concat("","/localization.json"));case 3:return n=e.sent,e.next=6,n.json();case 6:return this.localization=e.sent,this.default=this.selected=this.localization.default,this.list=this.localization.all,e.next=11,fetch("".concat("","/localization/").concat(this.selected,".json"));case 11:return a=e.sent,e.next=14,a.json();case 14:this.defaultLang=e.sent;case 15:return this.selected=t||this.localization.default,e.prev=16,e.next=19,fetch("".concat("","/localization/").concat(this.selected,".json"));case 19:return c=e.sent,e.t0=l.a,e.t1=Object(l.a)({},this.defaultLang),e.next=24,c.json();case 24:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 28:return e.prev=28,e.t3=e.catch(16),e.abrupt("return",this.defaultLang);case 31:case"end":return e.stop()}}),e,this,[[16,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"name",value:function(e){var t=I.a.getLanguageNativeName(e);return t?t[0].toUpperCase()+t.slice(1):e}}]),e}());n(105);function w(e){var t;return/https:\/\//.test(e.src)?Object(c.jsx)("img",Object(l.a)({alt:"",draggable:"false"},Object(l.a)(Object(l.a)({},e),{},{className:"msg-image"+(e.className?" "+e.className:"")}))):Object(c.jsx)("i",Object(l.a)(Object(l.a)({},Object(l.a)(Object(l.a)({},e),{},{className:"material-icons-round msg-image "+e.className})),{},{children:null!==(t=e.src)&&void 0!==t?t:"person"}))}function C(){var e=Object(r.useContext)(k),t=e.loading,n=e.user,a=e.banned,i=e.uistrings,s=Object(r.useRef)(),o=Object(v.a)(_.a.database().ref("messages")),u=Object(j.a)(o,2),d=u[0],b=u[1],h=Object(v.b)(_.a.database().ref("users")),f=Object(j.a)(h,2),O=f[0],m=f[1];return Object(r.useEffect)((function(){return s.current&&(s.current.parentNode.scrollTop=s.current.offsetTop)})),Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsx)("span",{className:"chat-header",children:i.chat_title}),Object(c.jsxs)("div",{className:"chat-body",children:[t||b||m?Object(c.jsx)(y.Loading,{}):a?Object(c.jsx)(E,{message:{text:i.chat_message_banned_text,displayName:i.chat_message_banned_user,photoURL:"verified_user"}}):null===d||void 0===d?void 0:d.map((function(e,t,a){var r,i,s=[];return(null===(r=a[t-1])||void 0===r?void 0:r.uid)===e.uid&&s.push("top"),(null===(i=a[t+1])||void 0===i?void 0:i.uid)===e.uid&&s.push("bottom"),Object(c.jsx)(E,{meta:{sent:e.uid===n.uid,connect:s},message:Object(l.a)(Object(l.a)({},e),O[e.uid])},t)})),Object(c.jsx)("div",{ref:s})]}),Object(c.jsx)(R,{})]})}function E(e){var t,n,a,i,s,o,l=e.meta,u=e.message,d=Object(r.useContext)(k).uistrings;return Object(c.jsxs)("div",{className:"message "+((null===l||void 0===l?void 0:l.sent)?"sent":"received")+(null===l||void 0===l||null===(t=l.connect)||void 0===t||null===(n=t.map)||void 0===n||null===(a=n.call(t,(function(e){return" connect-"+e})))||void 0===a||null===(i=a.join)||void 0===i?void 0:i.call(a,"")),children:[!(null===l||void 0===l||null===(s=l.connect)||void 0===s?void 0:s.includes("top"))&&Object(c.jsx)(w,{src:null===u||void 0===u?void 0:u.photoURL,title:null!==(o=null===u||void 0===u?void 0:u.displayName)&&void 0!==o?o:d.chat_message_default_user}),Object(c.jsx)("span",{className:"msg-text",children:null===u||void 0===u?void 0:u.text})]})}function R(){var e,t,n,a,i,s=Object(r.useContext)(k),o=s.user,l=s.uistrings,u=Object(r.useRef)(),d=function(e){e.key&&"Enter"!==e.key||/^\s*$/.test(u.current.value)||(_.a.database().ref("messages/").push({uid:o.uid,timestamp:_.a.database.ServerValue.TIMESTAMP,text:u.current.value}),u.current.value="")},b=null!==(e=null!==(t=null===o||void 0===o||null===(n=o.providerData)||void 0===n?void 0:n[0])&&void 0!==t?t:o)&&void 0!==e?e:{};return Object(c.jsxs)("div",{className:"chat-footer",children:[Object(c.jsx)(w,{src:b.photoURL,title:"You"}),Object(c.jsx)("input",{className:"chat-input",type:"text",placeholder:b.displayName?null===(a=l.chat_input_placeholder_user)||void 0===a||null===(i=a.replace)||void 0===i?void 0:i.call(a,"{1}",b.displayName):l.chat_input_placeholder_default,onKeyDown:d,ref:u}),Object(c.jsx)("button",{className:"chat-send",onClick:d,children:l.chat_button_send})]})}function L(){var e=Object(r.useContext)(k).uistrings;return Object(c.jsx)("span",{children:e.chat_error_account})}var S=function(){var e=Object(r.useContext)(k),t=e.user;return e.loading?Object(c.jsx)(y.Loading,{}):t?Object(c.jsx)(C,{}):Object(c.jsx)(L,{})};n(106);function D(e){return Object(c.jsx)("div",{className:"tile",style:Object(l.a)({backgroundColor:"rgb(".concat(e.color.join(", "),")")},e.visible&&{opacity:.5,transitionDuration:"calc(2s * var(--speed))",transitionDelay:"0s"})})}var A=function(){var e=Object(r.useState)(),t=Object(j.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(!1),s=Object(j.a)(i,2),o=s[0],l=s[1],u=24;return Object(r.useEffect)((function(){var e=new Image;e.src="logo192.png",e.onload=function(){var t=document.createElement("canvas");t.width=t.height=u;var n=t.getContext("2d");n.drawImage(e,0,0,u,u),a(n.getImageData(0,0,u,u).data)}}),[]),Object(r.useEffect)((function(){return n&&console.log(n)}),[n]),Object(c.jsx)("div",{className:"tile-container",onClick:function(){l(!0),setTimeout((function(){return l(!1)}),2e3)},children:n&&Array(u).fill().map((function(e,t){return++t&&Array(u).fill().map((function(e,a){return Object(c.jsx)(D,{color:n.slice(4*(t*u+a),4*(t*u+a)+4),visible:o},t*u+a)}))}))})};n(107);function P(e){var t,n=e.name;return(null===n||void 0===n||null===(t=n.includes)||void 0===t?void 0:t.call(n,"https"))?Object(c.jsx)("img",{alt:"",draggable:"false",className:"user-image",src:n}):Object(c.jsx)("i",{className:"material-icons-round",children:n})}function T(e){var t,n,a,i,s=e.autoLogin,o=Object(r.useContext)(k),l=o.loading,u=o.user,h=o.banned,O=o.uistrings,p=Object(r.useState)(null!==s&&void 0!==s&&s),v=Object(j.a)(p,2),g=v[0],x=v[1];if(l)return Object(c.jsx)(y.Loading,{});if(!u&&!g)return Object(c.jsx)(V,{leftIcon:"login",rightIcon:"keyboard_arrow_right",onClick:function(){return x(!0)},children:O.menubar_account_login});if(!u||g){var I={autoUpgradeAnonymousUsers:!0,callbacks:{signInSuccessWithAuthResult:function(e,t){x(!1)},signInFailure:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("firebaseui/anonymous-upgrade-merge-conflict"===t.code){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return x(!1),_.a.auth().currentUser.delete(),e.next=6,_.a.auth().signInWithCredential(t.credential);case 6:return e.next=8,_.a.functions().httpsCallable("upgradeUser")({newUid:u.uid});case 8:return n=e.sent,console.log(n.data),e.abrupt("return");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signInSuccessUrl:!1},credentialHelper:f.auth.CredentialHelper.GOOGLE_YOLO,signInFlow:_.a.auth().isSignInWithEmailLink(window.location.href)?"redirect":"popup",signInOptions:[{provider:_.a.auth.EmailAuthProvider.PROVIDER_ID,signInMethod:_.a.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD},{provider:_.a.auth.GoogleAuthProvider.PROVIDER_ID,clientId:"837019211462-a62qlmg12ln01fs4ubru65grnp86afup.apps.googleusercontent.com"},_.a.auth.FacebookAuthProvider.PROVIDER_ID,_.a.auth.TwitterAuthProvider.PROVIDER_ID,_.a.auth.GithubAuthProvider.PROVIDER_ID,_.a.auth.PhoneAuthProvider.PROVIDER_ID,!u&&f.auth.AnonymousAuthProvider.PROVIDER_ID]};return Object(c.jsx)(m.a,{uiConfig:I,firebaseAuth:_.a.auth()})}var N=null!==(t=null===(n=u.providerData)||void 0===n?void 0:n[0])&&void 0!==t?t:u;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(V,{leftIcon:null!==(a=N.photoURL)&&void 0!==a?a:"person",children:null!==(i=N.displayName)&&void 0!==i?i:"Anonymous"}),u.isAnonymous&&!h&&Object(c.jsx)(V,{leftIcon:"upgrade",onClick:function(){return x(!0)},children:O.menubar_account_upgrade}),N.email&&Object(c.jsx)(V,{leftIcon:"alternate_email",children:N.email}),N.phoneNumber&&Object(c.jsx)(V,{leftIcon:"phone",children:N.phoneNumber}),Object(c.jsx)(V,{leftIcon:"close",onClick:Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.auth().signOut();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:O.menubar_account_logout})]})}function M(e){var t=Object(r.useRef)();return Object(c.jsx)(h.a,{nodeRef:t,in:e.visible,timeout:200,classNames:"sidebar",children:Object(c.jsx)("aside",{ref:t,className:"sidebar",children:Object(c.jsx)("ul",{className:"sidebar-nav",children:e.children})})})}function U(e){return Object(c.jsxs)("div",{className:"clickable side-item",onClick:e.onClick,children:[e.leftIcon&&Object(c.jsx)("span",{className:"icon-button",children:Object(c.jsx)(P,{name:e.leftIcon})}),e.children,e.rightIcon&&Object(c.jsx)("span",{className:"icon-right",children:Object(c.jsx)(P,{name:e.rightIcon})})]})}var z=i.a.forwardRef((function(e,t){var n=Object(r.useState)("main"),a=Object(j.a)(n,2),i=a[0],s=a[1],o=Object(r.useState)(),u=Object(j.a)(o,2),d=u[0],b=u[1];return Object(r.useEffect)((function(){return e.children[i]&&b(e.children[i].ref.current.offsetHeight)}),[e,i]),e.children.$$typeof?Object(c.jsx)("div",Object(l.a)({className:"dropdown",ref:t},e)):Object(c.jsx)("div",{className:"dropdown",ref:t,style:{height:d},children:e.menus.map((function(t,n){return t.map((function(t,a){return Object(c.jsx)(h.a,{nodeRef:e.children[t].ref,in:i===t,unmountOnExit:!0,timeout:500,classNames:"dropdown-"+["primary","secondary"][n],children:Object(l.a)(Object(l.a)({},e.children[t]),{},{props:Object(l.a)(Object(l.a)({},e.children[t].props),{},{children:e.children[t].props.children.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{props:Object(l.a)(Object(l.a)({},e.props),{},{onClick:e.props.goToMenu?function(){return s(e.props.goToMenu)}:e.props.onClick})})}))})})},n+"-"+a)}))}))})}));function V(e){return Object(c.jsxs)("div",{className:"clickable drop-item",onClick:e.onClick,children:[e.leftIcon&&Object(c.jsx)("span",{className:"icon-button",children:Object(c.jsx)(P,{name:e.leftIcon})}),e.children,e.rightIcon&&Object(c.jsx)("span",{className:"icon-right",children:Object(c.jsx)(P,{name:e.rightIcon})})]})}function G(e){return Object(c.jsx)("header",{className:"navbar",children:Object(c.jsx)("ul",{className:"navbar-nav",children:e.children})})}var H=function(){return Object(c.jsx)("li",{style:{margin:"auto"}})};function F(e){var t,n=Object(r.useState)(null!==(t=e.autoOpen)&&void 0!==t&&t),a=Object(j.a)(n,2),s=a[0],o=a[1],l=Object(r.useRef)(),u=Object(r.useRef)(),d=function(t){var n,a,c,r,i=t.target;return!e.persistent&&!(null===(n=l.current)||void 0===n||null===(a=n.contains)||void 0===a?void 0:a.call(n,i))&&!(null===(c=u.current)||void 0===c||null===(r=c.contains)||void 0===r?void 0:r.call(c,i))&&!i.className.includes("firebaseui")&&o(!1)};return Object(r.useEffect)((function(){return document.addEventListener("mousedown",d),function(){return document.removeEventListener("mousedown",d)}})),Object(c.jsxs)("li",{className:"nav-item"+(s?" open":""),ref:l,children:[Object(c.jsx)("div",{className:"clickable icon-button",onClick:function(){var t;o(!s),null===(t=e.onClick)||void 0===t||t.call(e,!s)},children:Object(c.jsx)(P,{name:e.icon})}),e.badge&&Object(c.jsx)("span",{className:"nav-badge",children:e.badge}),s&&e.children&&i.a.cloneElement(e.children,{ref:u})]})}function J(e){var t;return Object(c.jsx)("section",{className:"main",children:Object(c.jsx)("div",{className:"main-container",children:e.children[null!==(t=e.page)&&void 0!==t?t:0]})})}var W=function(e){var t=e.keys,n=e.accessibility,i=Object(p.a)(_.a.auth()),s=Object(j.a)(i,2),o=s[0],u=s[1],h=Object(v.b)(_.a.database().ref("users/".concat(null===o||void 0===o?void 0:o.uid,"/strikes"))),f=Object(j.a)(h,2),O=f[0],m=f[1],g=m?null:O>2;Object(r.useEffect)((function(){o&&!o.isAnonymous&&O&&Object(b.a)(d.a.mark((function e(){var t,n,a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null!==(t=null===o||void 0===o||null===(n=o.providerData)||void 0===n?void 0:n[0])&&void 0!==t?t:o,c=_.a.storage().ref("users/"+o.uid+".jpg"),e.next=4,c.parent.listAll();case 4:if(!e.sent.items.map((function(e){return e.location.path})).includes("users/"+o.uid+".jpg")){e.next=6;break}return e.abrupt("return");case 6:if(!a.photoURL){e.next=18;break}return e.next=9,fetch(a.photoURL);case 9:if((r=e.sent).ok){e.next=12;break}return e.abrupt("return");case 12:return e.t0=c,e.next=15,r.blob();case 15:return e.t1=e.sent,e.next=18,e.t0.put.call(e.t0,e.t1);case 18:if(e.t2=_.a.database().ref("users/"+o.uid),e.t3=a.displayName,e.t4=a.email,e.t5=a.phoneNumber,!a.photoURL){e.next=28;break}return e.next=25,c.getDownloadURL();case 25:e.t6=e.sent,e.next=29;break;case 28:e.t6=null;case 29:e.t7=e.t6,e.t8=O,e.t9={displayName:e.t3,email:e.t4,phoneNumber:e.t5,photoURL:e.t7,strikes:e.t8},e.t2.set.call(e.t2,e.t9);case 33:case"end":return e.stop()}}),e)})))()}),[o,O]);var x=Object(r.useState)(Object(l.a)({sidebar:!1,location:0,language:N.default,accessibility:Object(l.a)({},Object.fromEntries(Object.values(t).map((function(e){return[e,null]}))))},JSON.parse(window.localStorage.getItem("state")))),I=Object(j.a)(x,2),w=I[0],C=I[1];Object(r.useEffect)((function(){var e=["location","accessibility","language"];window.localStorage.setItem("state",JSON.stringify(Object.fromEntries(Object.entries(w).filter((function(t){var n=Object(j.a)(t,1)[0];return e.includes(n)})))))}),[w]);var E=function(e){var t;return null!==(t=w.accessibility[e])&&void 0!==t?t:window.matchMedia(n[e][1]).matches},R=function(e,t){var a=Object(j.a)(n[e],2),c=a[0],r=a[1];switch(t){case window.matchMedia(r).matches:return c.mediaText=r,null;case!0:return c.mediaText="all",!0;default:return c.mediaText="not all",!1}},L=function(e){var t=w;null===R(e,t.accessibility[e]=!E(e))&&(t.accessibility[e]=null),C(Object(l.a)({},t))};Object.keys(n).forEach((function(e){return R(e,E(e))}));var D=Object(r.useState)({}),P=Object(j.a)(D,2),W=P[0],Y=P[1];Object(r.useEffect)((function(){return N.load(w.language).then((function(e){return Y(e)}))}),[w.language]);var B=_.a.auth().isSignInWithEmailLink(window.location.href);return Object(c.jsxs)(k.Provider,{value:{loading:u||m||0===Object.keys(W).length,user:o,banned:g,uistrings:W},children:[Object(c.jsxs)(M,{visible:w.sidebar,children:[Object(c.jsx)(U,{leftIcon:"airplanemode_on",onClick:function(){return C(Object(l.a)(Object(l.a)({},w),{},{location:0}))},children:W.sidebar_default}),Object(c.jsx)(U,{leftIcon:"border_all",onClick:function(){return C(Object(l.a)(Object(l.a)({},w),{},{location:1}))},children:W.sidebar_tiles}),Object(c.jsx)(U,{leftIcon:"chat",onClick:function(){return C(Object(l.a)(Object(l.a)({},w),{},{location:2}))},children:W.sidebar_chat})]}),Object(c.jsxs)(G,{children:[Object(c.jsx)(F,{icon:"menu",persistent:!0,onClick:function(e){return C(Object(l.a)(Object(l.a)({},w),{},{sidebar:e}))}}),Object(c.jsx)(H,{}),Object(c.jsx)(F,{icon:"notifications"+(O?"_active":""),badge:O,children:Object(c.jsx)(z,{children:(u||m)&&Object(c.jsx)(y.Loading,{})||g&&Object(c.jsx)(V,{leftIcon:"error",children:W.menubar_status_banned})||O&&Object(c.jsx)(V,{leftIcon:"warning",children:W.menubar_status_strikes.replace("{1}",O)})||Object(c.jsx)(V,{leftIcon:"thumb_up",children:W.menubar_status_ok})})}),Object(c.jsx)(F,{icon:"account_circle",persistent:!1,autoOpen:B,children:Object(c.jsx)(z,{children:Object(c.jsx)(T,{autoLogin:B})})}),Object(c.jsx)(F,{icon:"keyboard_arrow_down",children:Object(c.jsx)(z,{menus:[["main"],["lang"]],children:{main:Object(c.jsxs)("div",{ref:Object(r.useRef)(),children:[Object(c.jsx)(V,{leftIcon:"bedtime",onClick:function(){return L("darkTheme")},rightIcon:Object(c.jsx)(y.Switch,{on:E("darkTheme")}),children:W.menubar_accessibility_theme}),Object(c.jsx)(V,{leftIcon:"double_arrow",onClick:function(){return L("reducedMotion")},rightIcon:Object(c.jsx)(y.Switch,{on:E("reducedMotion")}),children:W.menubar_accessibility_motion}),Object(c.jsxs)(V,{leftIcon:"language",goToMenu:"lang",rightIcon:"keyboard_arrow_right",children:[W.menubar_accessibility_language,Object(c.jsx)("span",{style:{flex:1}}),N.name(N.selected)]})]}),lang:Object(c.jsx)("div",{ref:Object(r.useRef)(),children:[Object(c.jsx)(V,{leftIcon:"keyboard_arrow_left",goToMenu:"main",children:W.menubar_accessibility_back},"back")].concat(Object(a.a)(N.list.map((function(e){return Object(c.jsx)(V,{leftIcon:"language",rightIcon:e===N.selected&&"check",onClick:function(){return C(Object(l.a)(Object(l.a)({},w),{},{language:e}))},children:N.name(e)},e)}))))})}})})]}),Object(c.jsxs)(J,{page:w.location,children:[Object(c.jsx)("span",{children:W.page1}),Object(c.jsx)(A,{}),Object(c.jsx)(S,{})]})]})},Y={"(prefers-color-scheme: dark)":"darkTheme","(prefers-reduced-motion: reduce)":"reducedMotion"},B=Object.fromEntries(Object(a.a)(document.styleSheets).flatMap((function(e){return Object(a.a)(e.rules)})).filter((function(e){return e instanceof CSSMediaRule})).map((function(e){var t=e.media;return[Y[t.mediaText],[t,t.mediaText.toString()]]})));o.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(W,{keys:Y,accessibility:B})}),document.getElementById("root"))}},[[110,1,2]]]);
//# sourceMappingURL=main.ded238ba.chunk.js.map