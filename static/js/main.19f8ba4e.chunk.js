(this.webpackJsonphomepage=this.webpackJsonphomepage||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(19),c=n(1),i=n(4),r=n.n(i),s=n(11),o=n.n(s),l=n(6),u=n(10),d=n.n(u),j=n(16),b=n(8),h=n(51),O=n(15),m=n(23),f=n.n(m),v=n(24),p=n(12),x=n(5),g=(n(20),n(39),n(49),n(43),Object(i.createContext)({})),I={Loading:function(){return Object(c.jsx)("div",{className:"loading-container",children:Object(c.jsx)("div",{className:"lds-ellipsis",children:Array.from(Array(4)).map((function(e,t){return Object(c.jsx)("div",{},t)}))})})},Switch:function(e){var t=e.on;return Object(c.jsx)("div",{className:"switch "+(t?"on":"off")})}};try{x.a.initializeApp({apiKey:"AIzaSyAzpjpeQgorGwi0JFEwHB4gmnoLCCaLY0k",authDomain:"homepage-407c5.firebaseapp.com",databaseURL:"https://homepage-407c5.firebaseio.com",projectId:"homepage-407c5",storageBucket:"homepage-407c5.appspot.com",messagingSenderId:"837019211462",appId:"1:837019211462:web:cf461d3ab5fa5bec6f69c7",measurementId:"G-2EHD20CHYQ"})}catch(H){console.error(H)}n(44);function N(e){var t;return/https:\/\//.test(e.src)?Object(c.jsx)("img",Object(l.a)({alt:"",draggable:"false"},Object(l.a)(Object(l.a)({},e),{},{className:"msg-image"+(e.className?" "+e.className:"")}))):Object(c.jsx)("i",Object(l.a)(Object(l.a)({},Object(l.a)(Object(l.a)({},e),{},{className:"material-icons-round msg-image "+e.className})),{},{children:null!==(t=e.src)&&void 0!==t?t:"person"}))}function k(){var e=Object(i.useContext)(g),t=e.loading,n=e.user,a=e.banned,r=Object(i.useRef)(),s=Object(p.a)(x.a.database().ref("messages")),o=Object(b.a)(s,2),u=o[0],d=o[1],j=Object(p.b)(x.a.database().ref("users")),h=Object(b.a)(j,2),O=h[0],m=h[1];return Object(i.useEffect)((function(){return r.current&&(r.current.parentNode.scrollTop=r.current.offsetTop)})),Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsx)("span",{className:"chat-header",children:"Chatroom"}),Object(c.jsxs)("div",{className:"chat-body",children:[t||d||m?Object(c.jsx)(I.Loading,{}):a?Object(c.jsx)(y,{message:{text:"You have been banned noob!",displayName:"Admin",photoURL:"verified_user"}}):null===u||void 0===u?void 0:u.map((function(e,t,a){var i,r,s=[];return(null===(i=a[t-1])||void 0===i?void 0:i.uid)===e.uid&&s.push("top"),(null===(r=a[t+1])||void 0===r?void 0:r.uid)===e.uid&&s.push("bottom"),Object(c.jsx)(y,{meta:{sent:e.uid===n.uid,connect:s},message:Object(l.a)(Object(l.a)({},e),O[e.uid])},t)})),Object(c.jsx)("div",{ref:r})]}),Object(c.jsx)(w,{})]})}function y(e){var t,n,a,i,r,s,o=e.meta,l=e.message;return Object(c.jsxs)("div",{className:"message "+((null===o||void 0===o?void 0:o.sent)?"sent":"received")+(null===o||void 0===o||null===(t=o.connect)||void 0===t||null===(n=t.map)||void 0===n||null===(a=n.call(t,(function(e){return" connect-"+e})))||void 0===a||null===(i=a.join)||void 0===i?void 0:i.call(a,"")),children:[!(null===o||void 0===o||null===(r=o.connect)||void 0===r?void 0:r.includes("top"))&&Object(c.jsx)(N,{src:null===l||void 0===l?void 0:l.photoURL,title:null!==(s=null===l||void 0===l?void 0:l.displayName)&&void 0!==s?s:"(anonymous)"}),Object(c.jsx)("span",{className:"msg-text",children:null===l||void 0===l?void 0:l.text})]})}function w(){var e,t,n,a=Object(i.useContext)(g).user,r=Object(i.useRef)(),s=function(e){e.key&&"Enter"!==e.key||/^\s*$/.test(r.current.value)||(x.a.database().ref("messages/").push({uid:a.uid,timestamp:x.a.database.ServerValue.TIMESTAMP,text:r.current.value}),r.current.value="")},o=null!==(e=null!==(t=null===a||void 0===a||null===(n=a.providerData)||void 0===n?void 0:n[0])&&void 0!==t?t:a)&&void 0!==e?e:{};return Object(c.jsxs)("div",{className:"chat-footer",children:[Object(c.jsx)(N,{src:o.photoURL,title:"You"}),Object(c.jsx)("input",{className:"chat-input",type:"text",placeholder:o.displayName?"Chatting as ".concat(o.displayName,"..."):"Chatting anonymously...",onKeyDown:s,ref:r}),Object(c.jsx)("button",{className:"chat-send",onClick:s,children:"Send"})]})}function R(){return Object(c.jsx)("span",{children:"You must sign in first!"})}var C=function(){var e=Object(i.useContext)(g),t=e.user;return e.loadingUser||t?Object(c.jsx)(k,{}):Object(c.jsx)(R,{})};n(45);function E(e){var t,n=e.name;return(null===n||void 0===n||null===(t=n.includes)||void 0===t?void 0:t.call(n,"https"))?Object(c.jsx)("img",{alt:"",draggable:"false",className:"user-image",src:n}):Object(c.jsx)("i",{className:"material-icons-round",children:n})}function L(e){var t,n,a,r,s=e.autoLogin,o=Object(i.useContext)(g),u=o.loading,h=o.user,m=o.banned,v=Object(i.useState)(null!==s&&void 0!==s&&s),p=Object(b.a)(v,2),N=p[0],k=p[1];if(u)return Object(c.jsx)(I.Loading,{});if(!h&&!N)return Object(c.jsx)(_,{leftIcon:"login",rightIcon:"keyboard_arrow_right",onClick:function(){return k(!0)},children:"Log In"});if(!h||N){var y={autoUpgradeAnonymousUsers:!0,callbacks:{signInSuccessWithAuthResult:function(e,t){k(!1)},signInFailure:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a,c,i,r,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("firebaseui/anonymous-upgrade-merge-conflict"===t.code){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return k(!1),x.a.auth().currentUser.delete(),console.log(x.a.auth().currentUser),console.log(t.credential),e.next=8,x.a.auth().signInWithCredential(t.credential);case 8:return c=x.a.auth().currentUser,e.next=11,x.a.database().ref("messages").once("value");case 11:i=e.sent.val(),r=Object.keys(i).filter((function(e){return i[e].uid===h.uid})),s=Object.fromEntries(r.map((function(e){return[e,Object(l.a)(Object(l.a)({},i[e]),{},{uid:c.uid})]}))),console.log(s),o=null!==(n=null===c||void 0===c||null===(a=c.providerData)||void 0===a?void 0:a[0])&&void 0!==n?n:c,x.a.database().ref("messages").update(s),x.a.database().ref("users/"+c.uid).set({displayName:o.displayName,photoURL:o.photoURL});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signInSuccessUrl:!1},credentialHelper:O.auth.CredentialHelper.GOOGLE_YOLO,signInFlow:x.a.auth().isSignInWithEmailLink(window.location.href)?"redirect":"popup",signInOptions:[{provider:x.a.auth.EmailAuthProvider.PROVIDER_ID,signInMethod:x.a.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD},{provider:x.a.auth.GoogleAuthProvider.PROVIDER_ID,clientId:"837019211462-a62qlmg12ln01fs4ubru65grnp86afup.apps.googleusercontent.com"},x.a.auth.FacebookAuthProvider.PROVIDER_ID,x.a.auth.TwitterAuthProvider.PROVIDER_ID,x.a.auth.GithubAuthProvider.PROVIDER_ID,x.a.auth.PhoneAuthProvider.PROVIDER_ID,!h&&O.auth.AnonymousAuthProvider.PROVIDER_ID]};return Object(c.jsx)(f.a,{uiConfig:y,firebaseAuth:x.a.auth()})}var w=null!==(t=null===(n=h.providerData)||void 0===n?void 0:n[0])&&void 0!==t?t:h;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(_,{leftIcon:null!==(a=w.photoURL)&&void 0!==a?a:"person",children:null!==(r=w.displayName)&&void 0!==r?r:"Anonymous"}),h.isAnonymous&&!m&&Object(c.jsx)(_,{leftIcon:"upgrade",onClick:function(){return k(!0)},children:"Upgrade account"}),w.email&&Object(c.jsx)(_,{leftIcon:"alternate_email",children:w.email}),w.phoneNumber&&Object(c.jsx)(_,{leftIcon:"phone",children:w.phoneNumber}),Object(c.jsx)(_,{leftIcon:"close",onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.auth().signOut();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Sign out"})]})}function S(e){var t=Object(i.useRef)();return Object(c.jsx)(h.a,{nodeRef:t,in:e.visible,timeout:200,classNames:"sidebar",children:Object(c.jsx)("aside",{ref:t,className:"sidebar",children:Object(c.jsx)("ul",{className:"sidebar-nav",children:e.children})})})}function A(e){return Object(c.jsxs)("div",{className:"clickable side-item",onClick:e.onClick,children:[e.leftIcon&&Object(c.jsx)("span",{className:"icon-button",children:Object(c.jsx)(E,{name:e.leftIcon})}),e.children,e.rightIcon&&Object(c.jsx)("span",{className:"icon-right",children:Object(c.jsx)(E,{name:e.rightIcon})})]})}var D=r.a.forwardRef((function(e,t){return Object(c.jsx)("div",Object(l.a)({className:"dropdown",ref:t},e))}));function _(e){return Object(c.jsxs)("div",{className:"clickable drop-item",onClick:e.onClick,children:[e.leftIcon&&Object(c.jsx)("span",{className:"icon-button",children:Object(c.jsx)(E,{name:e.leftIcon})}),e.children,e.rightIcon&&Object(c.jsx)("span",{className:"icon-right",children:Object(c.jsx)(E,{name:e.rightIcon})})]})}function P(e){return Object(c.jsx)("header",{className:"navbar",children:Object(c.jsx)("ul",{className:"navbar-nav",children:e.children})})}var U=function(){return Object(c.jsx)("li",{style:{margin:"auto"}})};function M(e){var t,n=Object(i.useState)(null!==(t=e.autoOpen)&&void 0!==t&&t),a=Object(b.a)(n,2),s=a[0],o=a[1],l=Object(i.useRef)(),u=Object(i.useRef)(),d=function(t){var n,a,c,i,r=t.target;return!e.persistent&&!(null===(n=l.current)||void 0===n||null===(a=n.contains)||void 0===a?void 0:a.call(n,r))&&!(null===(c=u.current)||void 0===c||null===(i=c.contains)||void 0===i?void 0:i.call(c,r))&&!r.className.includes("firebaseui")&&o(!1)};return Object(i.useEffect)((function(){return document.addEventListener("mousedown",d),function(){return document.removeEventListener("mousedown",d)}})),Object(c.jsxs)("li",{className:"nav-item"+(s?" open":""),ref:l,children:[Object(c.jsx)("div",{className:"clickable icon-button",onClick:function(){var t;o(!s),null===(t=e.onClick)||void 0===t||t.call(e,!s)},children:Object(c.jsx)(E,{name:e.icon})}),e.badge&&Object(c.jsx)("span",{className:"nav-badge",children:e.badge}),s&&e.children&&r.a.cloneElement(e.children,{ref:u})]})}function T(e){var t;return Object(c.jsx)("section",{className:"main",children:Object(c.jsx)("div",{className:"main-container",children:e.children[null!==(t=e.page)&&void 0!==t?t:0]})})}var V=function(e){var t=e.keys,n=e.accessibility,a=Object(v.a)(x.a.auth()),r=Object(b.a)(a,2),s=r[0],o=r[1],u=Object(p.b)(x.a.database().ref("users/".concat(null===s||void 0===s?void 0:s.uid,"/strikes"))),h=Object(b.a)(u,2),O=h[0],m=h[1],f=Object(p.b)(x.a.database().ref("banned/".concat(null===s||void 0===s?void 0:s.uid))),N=Object(b.a)(f,2),k=N[0],y=N[1];Object(i.useEffect)((function(){s&&!s.isAnonymous&&Object(j.a)(d.a.mark((function e(){var t,n,a,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null!==(t=null===s||void 0===s||null===(n=s.providerData)||void 0===n?void 0:n[0])&&void 0!==t?t:s,c=x.a.storage().ref("users/"+s.uid+".jpg"),e.next=4,c.parent.listAll();case 4:if(!e.sent.items.map((function(e){return e.location.path})).includes("users/"+s.uid+".jpg")){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,fetch(a.photoURL);case 8:if((i=e.sent).ok){e.next=11;break}return e.abrupt("return");case 11:return e.t0=c,e.next=14,i.blob();case 14:return e.t1=e.sent,e.next=17,e.t0.put.call(e.t0,e.t1);case 17:return e.t2=x.a.database().ref("users/"+s.uid),e.t3=a.displayName,e.next=21,c.getDownloadURL();case 21:e.t4=e.sent,e.t5={displayName:e.t3,photoURL:e.t4},e.t2.set.call(e.t2,e.t5);case 24:case"end":return e.stop()}}),e)})))()}),[s]);var w=Object(i.useState)(Object(l.a)({sidebar:!1,location:0,accessibility:Object(l.a)({},Object.fromEntries(Object.values(t).map((function(e){return[e,null]}))))},JSON.parse(window.localStorage.getItem("state")))),R=Object(b.a)(w,2),E=R[0],V=R[1];Object(i.useEffect)((function(){var e=["location","accessibility"];window.localStorage.setItem("state",JSON.stringify(Object.fromEntries(Object.entries(E).filter((function(t){var n=Object(b.a)(t,1)[0];return e.includes(n)})))))}),[E]);var Y=function(e){var t;return null!==(t=E.accessibility[e])&&void 0!==t?t:window.matchMedia(n[e][1]).matches},G=function(e,t){var a=Object(b.a)(n[e],2),c=a[0],i=a[1];switch(t){case window.matchMedia(i).matches:return c.mediaText=i,null;case!0:return c.mediaText="all",!0;default:return c.mediaText="not all",!1}},H=function(e){var t=E;null===G(e,t.accessibility[e]=!Y(e))&&(t.accessibility[e]=null),V(Object(l.a)({},t))};Object.keys(n).forEach((function(e){return G(e,Y(e))}));var F=x.a.auth().isSignInWithEmailLink(window.location.href);return Object(c.jsxs)(g.Provider,{value:{loading:o||y,user:s,banned:k},children:[Object(c.jsxs)(S,{visible:E.sidebar,children:[Object(c.jsx)(A,{leftIcon:"airplanemode_on",onClick:function(){return V(Object(l.a)(Object(l.a)({},E),{},{location:0}))},children:"Item"}),Object(c.jsx)(A,{leftIcon:"airplanemode_on",onClick:function(){return V(Object(l.a)(Object(l.a)({},E),{},{location:1}))},children:"Item"}),Object(c.jsx)(A,{leftIcon:"chat",onClick:function(){return V(Object(l.a)(Object(l.a)({},E),{},{location:2}))},children:"Chat"})]}),Object(c.jsxs)(P,{children:[Object(c.jsx)(M,{icon:"menu",persistent:!0,onClick:function(e){return V(Object(l.a)(Object(l.a)({},E),{},{sidebar:e}))}}),Object(c.jsx)(U,{}),Object(c.jsx)(M,{icon:"notifications"+(O?"_active":""),badge:O,children:Object(c.jsx)(D,{children:(o||m)&&Object(c.jsx)(I.Loading,{})||k&&Object(c.jsx)(_,{leftIcon:"error",children:"You have been banned!"})||O&&Object(c.jsx)(_,{leftIcon:"warning",children:"You have ".concat(O,"/3 strikes!")})||Object(c.jsx)(_,{leftIcon:"thumb_up",children:"Nothing to see here \ud83d\ude01"})})}),Object(c.jsx)(M,{icon:"account_circle",persistent:!1,autoOpen:F,children:Object(c.jsx)(D,{children:Object(c.jsx)(L,{autoLogin:F})})}),Object(c.jsx)(M,{icon:"keyboard_arrow_down",children:Object(c.jsxs)(D,{children:[Object(c.jsx)(_,{leftIcon:"bedtime",onClick:function(){return H("darkTheme")},rightIcon:Object(c.jsx)(I.Switch,{on:Y("darkTheme")}),children:"Dark Mode"}),Object(c.jsx)(_,{leftIcon:"double_arrow",onClick:function(){return H("reducedMotion")},rightIcon:Object(c.jsx)(I.Switch,{on:Y("reducedMotion")}),children:"Reduced Motion"})]})})]}),Object(c.jsxs)(T,{page:E.location,children:[Object(c.jsx)("span",{children:"hi3"}),Object(c.jsx)("span",{children:"hi2"}),Object(c.jsx)(C,{})]})]})},Y={"(prefers-color-scheme: dark)":"darkTheme","(prefers-reduced-motion: reduce)":"reducedMotion"},G=Object.fromEntries(Object(a.a)(document.styleSheets).flatMap((function(e){return Object(a.a)(e.rules)})).filter((function(e){return e instanceof CSSMediaRule})).map((function(e){var t=e.media;return[Y[t.mediaText],[t,t.mediaText.toString()]]})));o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(V,{keys:Y,accessibility:G})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.19f8ba4e.chunk.js.map