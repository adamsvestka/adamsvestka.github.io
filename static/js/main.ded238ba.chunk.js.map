{"version":3,"sources":["root.js","Chat.js","Tiles.js","App.js","index.js"],"names":["GlobalContext","createContext","Components","className","Array","map","_","i","on","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","error","console","languages","this","default","selected","list","code","localization","fetch","process","response","json","all","response2","defaultLang","s","LocaleCode","getLanguageNativeName","toUpperCase","slice","Icon","props","test","src","alt","draggable","ChatRoom","useContext","loading","user","banned","uistrings","scrolldown","useRef","useListVals","database","ref","messages","loadingMessages","useObjectVal","users","loadingUsers","useEffect","current","parentNode","scrollTop","offsetTop","chat_title","Loading","ChatMessage","message","text","chat_message_banned_text","displayName","chat_message_banned_user","photoURL","msg","a","connect","uid","push","meta","sent","ChatBar","e","join","includes","title","chat_message_default_user","input","sendMessage","key","value","timestamp","ServerValue","TIMESTAMP","data","providerData","type","placeholder","chat_input_placeholder_user","replace","chat_input_placeholder_default","onKeyDown","onClick","chat_button_send","SignIn","chat_error_account","Chat","Tile","style","backgroundColor","color","visible","opacity","transitionDuration","transitionDelay","Tiles","useState","setData","setVisible","size","image","Image","onload","canvas","document","createElement","width","height","context","getContext","drawImage","getImageData","log","setTimeout","fill","y","x","name","UserDropdown","autoLogin","login","setLogin","DropdownItem","leftIcon","rightIcon","menubar_account_login","uiConfig","autoUpgradeAnonymousUsers","callbacks","signInSuccessWithAuthResult","authResult","redirectUrl","signInFailure","Promise","resolve","auth","currentUser","delete","signInWithCredential","credential","functions","httpsCallable","newUid","result","signInSuccessUrl","credentialHelper","firebaseui","CredentialHelper","GOOGLE_YOLO","signInFlow","isSignInWithEmailLink","window","location","href","signInOptions","provider","EmailAuthProvider","PROVIDER_ID","signInMethod","EMAIL_LINK_SIGN_IN_METHOD","GoogleAuthProvider","clientId","FacebookAuthProvider","TwitterAuthProvider","GithubAuthProvider","PhoneAuthProvider","AnonymousAuthProvider","firebaseAuth","isAnonymous","menubar_account_upgrade","email","phoneNumber","signOut","menubar_account_logout","Sidebar","nodeRef","CSSTransition","in","timeout","classNames","children","SidebarItem","DropdownMenu","React","forwardRef","menu","setMenu","setHeight","offsetHeight","$$typeof","menus","level","unmountOnExit","goToMenu","Navbar","Filler","margin","NavItem","autoOpen","open","setOpen","ref2","target","persistent","contains","addEventListener","removeEventListener","icon","badge","cloneElement","Main","page","App","keys","accessibility","useAuthState","loadingUser","strikes","loadingStrikes","storage","parent","listAll","items","path","res","ok","blob","put","getDownloadURL","set","sidebar","language","Object","fromEntries","values","JSON","parse","localStorage","getItem","state","setState","savedKeys","setItem","stringify","entries","filter","k","getMedia","matchMedia","matches","loadMedia","media","original","mediaText","toggleMedia","newState","forEach","setUistrings","load","then","r","Provider","length","sidebar_default","sidebar_tiles","sidebar_chat","menubar_status_banned","menubar_status_strikes","menubar_status_ok","main","Switch","menubar_accessibility_theme","menubar_accessibility_motion","menubar_accessibility_language","flex","lang","menubar_accessibility_back","page1","styleSheets","flatMap","rules","CSSMediaRule","m","toString","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ded238ba.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/storage';\nimport 'firebase/database';\nimport 'firebase/functions';\n\nimport LocaleCode from 'locale-code';\n\nimport './root.css';\n\n// React\nconst GlobalContext = createContext({});\n\nexport { GlobalContext };\n\nconst Components = {};\n\nComponents.Loading = () => {\n    return (\n        <div className=\"loading-container\">\n            <div className=\"lds-ellipsis\">\n                {[...Array(4)].map((_, i) => <div key={i} />)}\n            </div>\n        </div>\n    );\n};\n\nComponents.Switch = ({ on }) => {\n    return (\n        <div className={'switch ' + (on ? 'on' : 'off')} />\n    );\n};\n\nexport { Components };\n\n// Firebase\ntry {\n    firebase.initializeApp({\n        apiKey: \"AIzaSyAzpjpeQgorGwi0JFEwHB4gmnoLCCaLY0k\",\n        authDomain: \"homepage-407c5.firebaseapp.com\",\n        databaseURL: \"https://homepage-407c5.firebaseio.com\",\n        projectId: \"homepage-407c5\",\n        storageBucket: \"homepage-407c5.appspot.com\",\n        messagingSenderId: \"837019211462\",\n        appId: \"1:837019211462:web:cf461d3ab5fa5bec6f69c7\",\n        measurementId: \"G-2EHD20CHYQ\"\n    });\n} catch (error) {\n    console.error(error);\n}\n\nexport { firebase };\n\n// Custom\nclass Language {\n    constructor() {\n        this.default = this.selected = '';\n        this.list = [];\n    }\n    \n    async load(code) {\n        if (!this.localization) {\n            const response = await fetch(`${process.env.PUBLIC_URL}/localization.json`);\n            this.localization = await response.json();\n            this.default = this.selected = this.localization.default;\n            this.list = this.localization.all;\n            const response2 = await fetch(`${process.env.PUBLIC_URL}/localization/${this.selected}.json`);\n            this.defaultLang = await response2.json();\n        }\n        this.selected = code || this.localization.default;\n        try {\n            const response = await fetch(`${process.env.PUBLIC_URL}/localization/${this.selected}.json`);\n            return { ...this.defaultLang, ...await response.json() };\n        } catch (error) {\n            return this.defaultLang;\n        }\n    }\n\n    name(code) {\n        const s = LocaleCode.getLanguageNativeName(code);\n        return s ? s[0].toUpperCase() + s.slice(1) : code;\n    }\n}\n\nconst languages = new Language();\n\nexport { languages };","import React, { useContext, useEffect, useRef } from 'react';\n\nimport { useListVals, useObjectVal } from 'react-firebase-hooks/database';\n\nimport { firebase, GlobalContext, Components } from './root';\n\nimport './Chat.css';\n\n\nfunction Icon(props) {\n    return /https:\\/\\//.test(props.src) ? <img alt=\"\" draggable=\"false\" {...{ ...props, className: 'msg-image' + (props.className ? ' ' + props.className : '') }} /> : <i {...{ ...props, className: 'material-icons-round msg-image ' + props.className }}>{props.src ?? 'person'}</i>;\n}\n\nfunction Chat() {\n\n    const { user, loading } = useContext(GlobalContext);\n    \n    return loading ? <Components.Loading /> : (user ? <ChatRoom /> : <SignIn />);\n}\n\nfunction ChatRoom() {\n\n    const { loading, user, banned, uistrings } = useContext(GlobalContext);\n    const scrolldown = useRef();\n\n    const [messages, loadingMessages] = useListVals(firebase.database().ref('messages'));\n    const [users, loadingUsers] = useObjectVal(firebase.database().ref('users'));\n\n    useEffect(() => scrolldown.current && (scrolldown.current.parentNode.scrollTop = scrolldown.current.offsetTop));\n\n    return (\n        <div className=\"chat\">\n            <span className=\"chat-header\">{uistrings.chat_title}</span>\n            <div className=\"chat-body\">\n                {loading || loadingMessages || loadingUsers ? <Components.Loading /> :\n                (banned ? <ChatMessage message={{ text: uistrings.chat_message_banned_text, displayName: uistrings.chat_message_banned_user, photoURL: 'verified_user' }} /> :\n                messages?.map((msg, i, a) => {\n                    const connect = [];\n                    if (a[i-1]?.uid === msg.uid) connect.push('top');\n                    if (a[i+1]?.uid === msg.uid) connect.push('bottom');\n                    return <ChatMessage key={i} meta={{ sent: msg.uid === user.uid, connect: connect }} message={{ ...msg, ...users[msg.uid] }} />\n                }))}\n                <div ref={scrolldown} />\n            </div>\n            <ChatBar />\n        </div>\n    );\n}\n\nfunction ChatMessage({ meta, message: msg }) {\n    const { uistrings } = useContext(GlobalContext);\n    return (\n        <div className={'message ' + (meta?.sent ? 'sent' : 'received') + meta?.connect?.map?.(e => ' connect-' + e)?.join?.('') }>\n            {!meta?.connect?.includes('top') && <Icon src={msg?.photoURL} title={msg?.displayName ?? uistrings.chat_message_default_user} />}\n            <span className=\"msg-text\">{msg?.text}</span>\n        </div>\n    );\n}\n\nfunction ChatBar() {\n\n    const { user, uistrings } = useContext(GlobalContext);\n    const input = useRef();\n\n    const sendMessage = e => {\n        if ((e.key && e.key !== 'Enter') || /^\\s*$/.test(input.current.value)) return;\n\n        firebase.database().ref('messages/').push({\n            uid: user.uid,\n            timestamp: firebase.database.ServerValue.TIMESTAMP,\n            text: input.current.value\n        });\n        input.current.value = '';\n    };\n\n    const data = user?.providerData?.[0] ?? user ?? {};\n\n    return (\n        <div className=\"chat-footer\">\n            <Icon src={data.photoURL} title=\"You\" />\n            <input className=\"chat-input\" type=\"text\" placeholder={data.displayName ? uistrings.chat_input_placeholder_user?.replace?.('{1}', data.displayName) : uistrings.chat_input_placeholder_default} onKeyDown={sendMessage} ref={input} />\n            <button className=\"chat-send\" onClick={sendMessage}>{uistrings.chat_button_send}</button>\n        </div>\n    );\n}\n\nfunction SignIn() {\n    const { uistrings } = useContext(GlobalContext);\n    return <span>{uistrings.chat_error_account}</span>;\n}\n\nexport default Chat;","import React, { useEffect, useState } from 'react';\n\n// import { GlobalContext, Components } from './root';\n\n\nimport './Tiles.css';\n\n\nfunction Tiles() {\n\n    // const { loading, user, banned, uistrings } = useContext(GlobalContext);\n\n    const [data, setData] = useState();\n    const [visible, setVisible] = useState(false);\n    const size = 24;\n\n    useEffect(() => {\n        const image = new Image();\n        image.src = 'logo192.png';\n        image.onload = () => {\n            const canvas = document.createElement('canvas');\n            canvas.width = canvas.height = size;\n            const context = canvas.getContext('2d');\n            context.drawImage(image, 0, 0, size, size);\n            setData(context.getImageData(0, 0, size, size).data);\n        }\n    }, []);\n    useEffect(() => data && console.log(data), [data]);\n\n    return (\n        <div className=\"tile-container\" onClick={() => { setVisible(true); setTimeout(() => setVisible(false), 2000); }}>\n            {data && Array(size).fill().map((_, y) => ++y && Array(size).fill().map((_, x) => \n                <Tile key={y * size + x} color={data.slice((y * size + x) * 4, (y * size + x) * 4 + 4)} visible={visible} />\n            ))}\n        </div>\n    );\n}\n\nfunction Tile(props) {\n    return <div className=\"tile\" style={{ backgroundColor: `rgb(${props.color.join(', ')})`, ...(props.visible && { opacity: 0.5, transitionDuration: 'calc(2s * var(--speed))', transitionDelay: '0s' }) }}></div>\n}\n\nexport default Tiles;","import React, { useContext, useEffect, useRef, useState } from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nimport * as firebaseui from 'firebaseui';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\n\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useObjectVal } from 'react-firebase-hooks/database';\n\nimport { firebase, GlobalContext, Components, languages } from './root';\nimport Chat from './Chat';\nimport Tiles from './Tiles';\n\nimport './App.css';\n\n\nfunction Icon({ name }) {\n    return name?.includes?.('https') ? <img alt=\"\" draggable=\"false\" className=\"user-image\" src={name} /> : <i className=\"material-icons-round\">{name}</i>;\n}\n\nfunction App({ keys, accessibility }) {\n\n    const [user, loadingUser] = useAuthState(firebase.auth());\n    const [strikes, loadingStrikes] = useObjectVal(firebase.database().ref(`users/${user?.uid}/strikes`));\n    const banned = loadingStrikes ? null : strikes > 2;\n\n    useEffect(() => {\n        if (!user || user.isAnonymous || !strikes) return;\n        \n        (async () => {\n            const data = user?.providerData?.[0] ?? user;\n            const ref = firebase.storage().ref('users/' + user.uid + '.jpg');\n            if ((await ref.parent.listAll()).items.map(e => e.location.path).includes('users/' + user.uid + '.jpg')) return;\n            \n            if (data.photoURL) {\n                const res = await fetch(data.photoURL);\n                if (!res.ok) return;\n                await ref.put(await res.blob());\n            }\n\n            firebase.database().ref('users/' + user.uid).set({\n                displayName: data.displayName,\n                email: data.email,\n                phoneNumber: data.phoneNumber,\n                photoURL: data.photoURL ? await ref.getDownloadURL() : null,\n                strikes: strikes\n            });\n        })();\n    }, [user, strikes]);\n\n    const [state, setState] = useState({\n        sidebar: false,\n        location: 0,\n        language: languages.default,\n        accessibility: {\n            ...Object.fromEntries(Object.values(keys).map(e => [e, null])),\n        },\n        \n        ...JSON.parse(window.localStorage.getItem('state'))\n    });\n    \n    useEffect(() => {\n        const savedKeys = ['location', 'accessibility', 'language'];\n        window.localStorage.setItem('state', JSON.stringify(Object.fromEntries(Object.entries(state).filter(([k]) => savedKeys.includes(k)))));\n    }, [state]);\n    \n    const getMedia = key => state.accessibility[key] ?? window.matchMedia(accessibility[key][1]).matches;\n\n    const loadMedia = (key, value) => {\n        const [media, original] = accessibility[key];\n        switch (value) {\n            case window.matchMedia(original).matches: media.mediaText = original; return null;\n            case true: media.mediaText = 'all'; return true;\n            default: media.mediaText = 'not all'; return false;\n        }\n    };\n    \n    const toggleMedia = key => {\n        const newState = state;\n        if (loadMedia(key, newState.accessibility[key] = !getMedia(key)) === null) newState.accessibility[key] = null;\n        setState({ ...newState });\n    };\n    \n    Object.keys(accessibility).forEach(key => loadMedia(key, getMedia(key)));\n\n    const [uistrings, setUistrings] = useState({});\n    useEffect(() => languages.load(state.language).then(r => setUistrings(r)), [state.language]);\n\n    const autoLogin = firebase.auth().isSignInWithEmailLink(window.location.href);\n\n    return (\n        <GlobalContext.Provider value={{ loading: loadingUser || loadingStrikes || Object.keys(uistrings).length === 0, user, banned, uistrings }}>\n            <Sidebar visible={state.sidebar}>\n                <SidebarItem leftIcon=\"airplanemode_on\" onClick={() => setState({ ...state, location: 0 })}>{uistrings.sidebar_default}</SidebarItem>\n                <SidebarItem leftIcon=\"border_all\" onClick={() => setState({ ...state, location: 1 })}>{uistrings.sidebar_tiles}</SidebarItem>\n                <SidebarItem leftIcon=\"chat\" onClick={() => setState({ ...state, location: 2 })}>{uistrings.sidebar_chat}</SidebarItem>\n            </Sidebar>\n            <Navbar>\n                <NavItem icon=\"menu\" persistent={true} onClick={e => setState({ ...state, sidebar: e })} />\n                <Filler />\n                <NavItem icon={'notifications' + (strikes ? '_active' : '')} badge={strikes}>\n                    <DropdownMenu>\n                        {((loadingUser || loadingStrikes) && <Components.Loading />) ||\n                        (banned && <DropdownItem leftIcon=\"error\">{uistrings.menubar_status_banned}</DropdownItem>) ||\n                        (strikes && <DropdownItem leftIcon=\"warning\">{uistrings.menubar_status_strikes.replace('{1}', strikes)}</DropdownItem>) ||\n                        (<DropdownItem leftIcon=\"thumb_up\">{uistrings.menubar_status_ok}</DropdownItem>)}\n                    </DropdownMenu>\n                </NavItem>\n                <NavItem icon=\"account_circle\" persistent={false} autoOpen={autoLogin}>\n                    <DropdownMenu>\n                        <UserDropdown autoLogin={autoLogin} />\n                    </DropdownMenu>\n                </NavItem>\n                <NavItem icon=\"keyboard_arrow_down\">\n                    <DropdownMenu menus={[['main'], ['lang']]}>\n                        {{\n                            main: <div ref={useRef()}>\n                                <DropdownItem leftIcon=\"bedtime\" onClick={() => toggleMedia('darkTheme')} rightIcon={<Components.Switch on={getMedia('darkTheme')} />}>{uistrings.menubar_accessibility_theme}</DropdownItem>\n                                <DropdownItem leftIcon=\"double_arrow\" onClick={() => toggleMedia('reducedMotion')} rightIcon={<Components.Switch on={getMedia('reducedMotion')} />}>{uistrings.menubar_accessibility_motion}</DropdownItem>\n                                <DropdownItem leftIcon=\"language\" goToMenu=\"lang\" rightIcon=\"keyboard_arrow_right\">{uistrings.menubar_accessibility_language}<span style={{ flex: 1 }} />{languages.name(languages.selected)}</DropdownItem>\n                            </div>,\n                            lang: <div ref={useRef()} children={[\n                                <DropdownItem leftIcon=\"keyboard_arrow_left\" goToMenu=\"main\" key=\"back\">{uistrings.menubar_accessibility_back}</DropdownItem>,\n                                ...languages.list.map(lang => <DropdownItem leftIcon=\"language\" rightIcon={lang === languages.selected && 'check'} key={lang} onClick={() => setState({ ...state, language: lang })}>{languages.name(lang)}</DropdownItem>)\n                            ]}></div>\n                        }}\n                    </DropdownMenu>\n                </NavItem>\n            </Navbar>\n            <Main page={state.location}>\n                <span>{uistrings.page1}</span>\n                <Tiles />\n                <Chat />\n            </Main>\n        </GlobalContext.Provider>\n    );\n}\n\n\nfunction UserDropdown({ autoLogin }) {\n\n    const { loading, user, banned, uistrings } = useContext(GlobalContext);\n    const [login, setLogin] = useState(autoLogin ?? false);\n\n    if (loading) return <Components.Loading />;\n\n    if (!user && !login) return <DropdownItem leftIcon=\"login\" rightIcon=\"keyboard_arrow_right\" onClick={() => setLogin(true)}>{uistrings.menubar_account_login}</DropdownItem>;\n    \n    if (!user || login) {\n        const uiConfig = {\n            autoUpgradeAnonymousUsers: true,\n            callbacks: {\n                signInSuccessWithAuthResult: (authResult, redirectUrl) => {\n                    setLogin(false);\n                },\n                signInFailure: async error => {\n                    if (error.code !== 'firebaseui/anonymous-upgrade-merge-conflict') return Promise.resolve();\n                    setLogin(false);\n\n                    firebase.auth().currentUser.delete();\n                    await firebase.auth().signInWithCredential(error.credential);\n\n                    // const newUser = firebase.auth().currentUser;\n\n                    const result = await firebase.functions().httpsCallable('upgradeUser')({ newUid: user.uid });\n                    console.log(result.data);\n                    return;\n\n//                     firebase.auth().currentUser.delete();\n//                     console.log(firebase.auth().currentUser);\n//                     console.log(error.credential);\n//                     await firebase.auth().signInWithCredential(error.credential);\n\n//                     const newUser = firebase.auth().currentUser;\n//                     const messages = (await firebase.database().ref('messages').once('value')).val();\n//                     const keys = Object.keys(messages).filter(mid => messages[mid].uid === user.uid);\n//                     const updates = Object.fromEntries(keys.map(mid => [mid, { ...messages[mid], uid: newUser.uid }]));\n// console.log(updates);\n//                     const data = newUser?.providerData?.[0] ?? newUser;\n//                     // const strikes = (await firebase.database().ref('users/' + user.uid + '/strikes').once('value')).val();\n\n//                     firebase.database().ref('messages').update(updates);\n//                     firebase.database().ref('users/' + newUser.uid).set({\n//                         displayName: data.displayName,\n//                         photoURL: data.photoURL,\n//                         // strikes: strikes\n//                     });\n                },\n                signInSuccessUrl: false,\n            },\n            credentialHelper: firebaseui.auth.CredentialHelper.GOOGLE_YOLO,\n            signInFlow: firebase.auth().isSignInWithEmailLink(window.location.href) ? 'redirect' : 'popup',\n            signInOptions: [\n                {\n                    provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,\n                    signInMethod: firebase.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD,\n                },\n                {\n                    provider: firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n                    clientId: '837019211462-a62qlmg12ln01fs4ubru65grnp86afup.apps.googleusercontent.com',\n                },\n                firebase.auth.FacebookAuthProvider.PROVIDER_ID,\n                firebase.auth.TwitterAuthProvider.PROVIDER_ID,\n                firebase.auth.GithubAuthProvider.PROVIDER_ID,\n                firebase.auth.PhoneAuthProvider.PROVIDER_ID,\n                !user && firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID,\n            ],\n        };\n\n        return <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />;\n    }\n\n    const data = user.providerData?.[0] ?? user;\n\n    return <>\n        <DropdownItem leftIcon={data.photoURL ?? 'person'}>{data.displayName ?? 'Anonymous'}</DropdownItem>\n        {user.isAnonymous && !banned  && <DropdownItem leftIcon=\"upgrade\" onClick={() => setLogin(true)}>{uistrings.menubar_account_upgrade}</DropdownItem>}\n        {data.email && <DropdownItem leftIcon=\"alternate_email\">{data.email}</DropdownItem>}\n        {data.phoneNumber && <DropdownItem leftIcon=\"phone\">{data.phoneNumber}</DropdownItem>}\n        <DropdownItem leftIcon=\"close\" onClick={async () => await firebase.auth().signOut()}>{uistrings.menubar_account_logout}</DropdownItem>\n    </>;\n}\n\nfunction Sidebar(props) {\n    const nodeRef = useRef();\n\n    return (\n        <CSSTransition nodeRef={nodeRef} in={props.visible} timeout={200} classNames=\"sidebar\">\n            <aside ref={nodeRef} className=\"sidebar\">\n                <ul className=\"sidebar-nav\">{props.children}</ul>\n            </aside>\n        </CSSTransition>\n    );\n}\n\nfunction SidebarItem(props) {\n    return (\n        <div className=\"clickable side-item\" onClick={props.onClick}>\n            {props.leftIcon && <span className=\"icon-button\"><Icon name={props.leftIcon} /></span>}\n            {props.children}\n            {props.rightIcon && <span className=\"icon-right\"><Icon name={props.rightIcon} /></span>}\n        </div>\n    );\n}\n\nconst DropdownMenu = React.forwardRef((props, ref) => {\n    const [menu, setMenu] = useState('main');\n    const [height, setHeight] = useState();\n\n    useEffect(() => props.children[menu] && setHeight(props.children[menu].ref.current.offsetHeight), [props, menu]);\n\n    if (props.children.$$typeof) {\n        return <div className=\"dropdown\" ref={ref} {...props} />;\n    } else {\n        return (\n            <div className=\"dropdown\" ref={ref} style={{ height }}>\n                {props.menus.map((e, level) => e.map((name, i) => (\n                    <CSSTransition nodeRef={props.children[name].ref} in={menu === name} unmountOnExit timeout={500} classNames={'dropdown-' + ['primary', 'secondary'][level]} key={level + '-' + i}>\n                        {{ ...props.children[name],\n                            props: { ...props.children[name].props,\n                                children: props.children[name].props.children.map(e => ({ ...e, props: { ...e.props,\n                                    onClick: e.props.goToMenu ? () => setMenu(e.props.goToMenu) : e.props.onClick\n                                }\n                            }))\n                        }}}\n                    </CSSTransition>\n                )))}\n            </div>\n        );\n    }\n});\n\nfunction DropdownItem(props) {\n    return (\n        <div className=\"clickable drop-item\" onClick={props.onClick}>\n            {props.leftIcon && <span className=\"icon-button\"><Icon name={props.leftIcon} /></span>}\n            {props.children}\n            {props.rightIcon && <span className=\"icon-right\"><Icon name={props.rightIcon} /></span>}\n        </div>\n    );\n}\n\nfunction Navbar(props) {\n    return (\n        <header className=\"navbar\">\n            <ul className=\"navbar-nav\">{props.children}</ul>\n        </header>\n    );\n}\n\nconst Filler = () => <li style={{ margin: 'auto' }} />;\n\nfunction NavItem(props) {\n\n    const [open, setOpen] = useState(props.autoOpen ?? false);\n    const ref = useRef();\n    const ref2 = useRef();\n\n    const onClick = ({ target }) => !props.persistent && !ref.current?.contains?.(target) && !ref2.current?.contains?.(target) && !target.className.includes('firebaseui') && setOpen(false);\n\n    useEffect(() => {\n        document.addEventListener('mousedown', onClick);\n        return () => document.removeEventListener('mousedown', onClick);\n    });\n\n    return (\n        <li className={'nav-item' + (open ? ' open' : '')} ref={ref}>\n            <div className=\"clickable icon-button\" onClick={() => { setOpen(!open); props.onClick?.(!open); }}>\n                <Icon name={props.icon} />\n            </div>\n            {props.badge && <span className=\"nav-badge\">{props.badge}</span>}\n\n            {open && props.children && React.cloneElement(props.children, { ref: ref2 })}\n        </li>\n    );\n}\n\nfunction Main(props) {\n    return (\n        <section className=\"main\">\n            <div className=\"main-container\">{props.children[props.page ?? 0]}</div>\n        </section>\n    );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\n\nconst keys = {\n    '(prefers-color-scheme: dark)': 'darkTheme',\n    '(prefers-reduced-motion: reduce)': 'reducedMotion'\n};\nconst accessibility = Object.fromEntries([...document.styleSheets].flatMap(e => [...e.rules]).filter(e => e instanceof CSSMediaRule).map(({ media: m }) => [keys[m.mediaText], [m, m.mediaText.toString()]]));\n\nReactDOM.render(\n    <React.StrictMode>\n        <App keys={keys} accessibility={accessibility} />\n    </React.StrictMode>,\n    document.getElementById('root')\n);"],"sourceRoot":""}